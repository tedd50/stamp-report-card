<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WELLBEING ACADEMY REPORT CARD</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f5f5f5;
        }

        #report-card {
            position: relative;
            width: 100%;
            /* Makes the background image responsive */
            max-width: 400px;
            /* Limit the width for mobile view */
            height: auto;
            /* Maintain aspect ratio */
            aspect-ratio: 1409 / 2000;
            /* Ensures the correct height is calculated based on width */
            background-image: url('Background.png');
            background-size: cover;
            /* Ensures the entire image fills the container */
            background-position: center;
            /* Centers the image */
        }

        .stamp-box {
            position: absolute;
            width: 0px;
            /* Adjust the size to fit the pink squares */
            height: 60px;
        }

        /* Example positions for each category */
        .admission {
            top: 100px;
            left: 20px;
        }

        .check-in {
            top: 100px;
            left: 100px;
        }

        .finals {
            top: 100px;
            left: 180px;
        }

        .engagement {
            top: 100px;
            left: 260px;
        }

        /* Add additional positions for the rest of the boxes */

        #student-info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #333;
            font-family: Arial, sans-serif;
            font-size: 16px;
        }

        #student-info span {
            display: block;
        }
    </style>
</head>

<body>
    <div id="report-card">
        <div id="student-info">
            <span id="name"></span>
            <span id="year"></span>
            <span id="quarter"></span>
        </div>
    </div>

    <script>
        // API URL
        const API_URL = 'https://loyalty-stamp.onrender.com/stamps/1';

        // Image assets
        const ASSETS = {
            stamped: 'StampedBox.png',
            empty: 'EmptyBox.png'
        };

        // Dynamic rendering
        async function fetchReportData() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();

                // Populate student info
                document.getElementById('name').textContent = `${data.name}`;
                document.getElementById('year').textContent = `${data.period.year}`;
                document.getElementById('quarter').textContent = `${data.period.quarter}`;

                // Populate stamp boxes
                const container = document.getElementById('report-card');
                data.stamps.forEach((stamp, index) => {
                    const stampBox = document.createElement('div');
                    stampBox.classList.add('stamp-box');
                    stampBox.style.backgroundImage = `url(${stamp ? ASSETS.stamped : ASSETS.empty})`;

                    // Set dynamic position (adjust these to match your design grid)
                    const row = Math.floor(index / 5); // Assume 5 columns per row
                    const col = index % 5;
                    stampBox.style.top = `${150 + row * 70}px`; // Example: 150px top offset + 70px per row
                    stampBox.style.left = `${20 + col * 70}px`; // Example: 20px left offset + 70px per column

                    container.appendChild(stampBox);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        fetchReportData();
    </script>
</body>

</html>